# V8 内存管理笔记

---

## 1. 内存分类

V8 内存主要分为两部分：

### 1.1 栈内存（Stack）

- 存放**基本类型**（number、boolean、undefined、null）  
- 存放**函数调用上下文**（参数、局部变量、执行环境）  
- **特点**：
  - 访问速度快，连续分配  
  - 生命周期短，函数执行完毕自动释放  

示例：

```javascript
function add(a, b) {
  let sum = a + b; // sum 存放在栈内存
  return sum;
}
let result = add(2, 3); // result 存放在栈内存

```
```mermaid
flowchart TD
    A[栈内存 Stack] --> B[存放基本类型变量与函数上下文]
    C[堆内存 Heap] --> D[存放对象、数组、引用类型]
    D --> E{垃圾回收 GC}
    E --> F[新生代 GC（Scavenge / 复制算法）]
    E --> G[老生代 GC（Mark-Sweep / Mark-Compact）]
    F --> D
    G --> D